package com.trio.view.ctrl;

import org.zkoss.zk.ui.Component;
import org.zkoss.zk.ui.Executions;
import org.zkoss.zk.ui.Sessions;
import org.zkoss.zul.Iframe;
import org.zkoss.zul.Label;
import org.zkoss.zul.Menu;
import org.zkoss.zul.Menuitem;

import com.trio.base.TrioBasePage;
import com.trio.util.LoginManager;

public class IndexCtrl extends TrioBasePage{

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;

	Label lblid, lblrole;
	Iframe iframe;
	Menuitem mAppDo, mKorDo, mEntryDo, mAsterAreaPjl, mMonitoring, mKorNilai, mPickList,
	mCtkStnk, mMasterDealer, back, mLogOut;


	@Override
	public void doAfterCompose(Component comp) throws Exception {
		super.doAfterCompose(comp);

		LoginManager lm = LoginManager.getIntance(Sessions.getCurrent());
		lblid.setValue(lm.getUser().getDblist());

		back.setVisible(false);
	}



	public void onClick$mAppDo(){
		iframe.setSrc("dealer.zul");
		back.setVisible(true);
	}

	public void onClick$mLogOut(){
		logOut();
	}


	public void onClick$mAsterAreaPjl(){
		iframe.setSrc("dtlareadealers.zul");
		back.setVisible(true);
	}

	//	public void onClik$mMasterDealer() throws InterruptedException {
	//		iframe.setSrc("dealer.zul");
	//	}

	public void onPickList(){
		iframe.setSrc("gantinomesinpicklist.zul");
	}

	public void onMaster(){
		iframe.setSrc("dealer.zul");
	}

	public void onMasterKecamatan(){
		iframe.setSrc("kecamatan.zul");
		back.setVisible(true);
	}

	public void onMasterKelurahan(){
		iframe.setSrc("kelurahan.zul");
		back.setVisible(true);
	}

	public void onMonitoring(){
		iframe.setSrc("pelangwil.zul");
		back.setVisible(true);
	}

	public void onKoreksipw(){
		iframe.setSrc("koreksipw.zul");
		back.setVisible(true);
	}

	public void onCetakSTNK(){
		iframe.setSrc("cetakSTNK.zul");
	}

	public void onClick$back(){
		iframe.setSrc("");
	}

	public void logOut(){
		LoginManager lm = LoginManager.getIntance(Sessions.getCurrent());
		lm.logOff();
		Executions.sendRedirect("login.zul");

	}
}
